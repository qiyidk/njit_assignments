CREATE TABLE AUTHOR
(AUTHORID  VARCHAR(15)  NOT NULL,
 ANAME	   VARCHAR(100),
 PRIMARY KEY(AUTHORID));

CREATE TABLE L_USER
(USERID  VARCHAR(15)  NOT NULL,
 RTYPE  VARCHAR(15),
 RNAME  VARCHAR(30),
 ADDRESS  VARCHAR(40),
 PASSWORD  VARCHAR(40),
 PRIMARY KEY(USERID));

CREATE TABLE PUBLISHER
(PUBLISHERID  VARCHAR(15)  NOT NULL,
 PUBNAME  VARCHAR(40),
 ADDRESS  VARCHAR(40),
 PRIMARY KEY(PUBLISHERID));

CREATE TABLE BRANCH
(LIBID  VARCHAR(15)  NOT NULL,
 LNAME  VARCHAR(30),
 LLOCATION  VARCHAR(40),
 PRIMARY KEY(LIBID));

CREATE TABLE DOCUMENT
(DOCID  VARCHAR(15)  NOT NULL,
 TITLE  VARCHAR(200),
 PDATE  DATE,
 PUBLISHERID  VARCHAR(15),
 TYPE   VARCHAR(15)  NOT NULL,
 PRIMARY KEY(DOCID),
 FOREIGN KEY(PUBLISHERID) REFERENCES PUBLISHER(PUBLISHERID));

CREATE TABLE BOOK
(DOCID  VARCHAR(15)  NOT NULL,
 ISBN   VARCHAR(20),
 PRIMARY KEY(DOCID),
 FOREIGN KEY(DOCID) REFERENCES DOCUMENT(DOCID));

CREATE TABLE WRITES
(AUTHORID  VARCHAR(15)  NOT NULL,
 DOCID     VARCHAR(15)  NOT NULL,
 PRIMARY KEY(AUTHORID, DOCID),
 FOREIGN KEY(AUTHORID) REFERENCES AUTHOR(AUTHORID),
 FOREIGN KEY(DOCID) REFERENCES BOOK(DOCID));

CREATE TABLE CHIEF_EDITOR
(EDITOR_ID  VARCHAR(15)  NOT NULL,
 ENAME  VARCHAR(40),
 PRIMARY KEY(EDITOR_ID));

CREATE TABLE JOURNAL_VOLUME
(DOCID  VARCHAR(15)  NOT NULL,
 JVOLUME  INT,
 EDITOR_ID  VARCHAR(15),
 PRIMARY KEY(DOCID),
 FOREIGN KEY(DOCID) REFERENCES DOCUMENT(DOCID),
 FOREIGN KEY(EDITOR_ID) REFERENCES CHIEF_EDITOR(EDITOR_ID));

CREATE TABLE PROCEEDINGS
(DOCID  VARCHAR(15)  NOT NULL,
 CDATE  DATE,
 CLOCATIN  VARCHAR(100),
 CEDITOR  VARCHAR(40),
 PRIMARY KEY(DOCID),
 FOREIGN KEY(DOCID) REFERENCES DOCUMENT(DOCID));

CREATE TABLE JOURNAL_ISSUE
(DOCID  VARCHAR(15)  NOT NULL,
 ISSUE_NO  INT  NOT NULL,
 SCOPE  VARCHAR(100),
 PRIMARY KEY(DOCID, ISSUE_NO),
 FOREIGN KEY(DOCID) REFERENCES JOURNAL_VOLUME(DOCID));

CREATE TABLE INV_EDITOR
(DOCID  VARCHAR(15)  NOT NULL,
 ISSUE_NO  INT  NOT NULL,
 IENAME  VARCHAR(40)  NOT NULL,
 PRIMARY KEY(DOCID, ISSUE_NO, IENAME),
 FOREIGN KEY(DOCID, ISSUE_NO) REFERENCES JOURNAL_ISSUE(DOCID, ISSUE_NO));

CREATE TABLE COPY
(DOCID  VARCHAR(15)  NOT NULL,
 COPYNO  VARCHAR(15)  NOT NULL,
 LIBID  VARCHAR(15)  NOT NULL,
 POSITION  VARCHAR(6),
 PRIMARY KEY(DOCID, COPYNO,LIBID),
 FOREIGN KEY(DOCID) REFERENCES DOCUMENT(DOCID),
 FOREIGN KEY(LIBID) REFERENCES BRANCH(LIBID));

CREATE TABLE BORROWS
(BORNUMBER INT auto_increment  NOT NULL,
 READERID  VARCHAR(15),
 DOCID  VARCHAR(15),
 LIBID  VARCHAR(15),
 COPYNO  VARCHAR(15),
 BDTIME  DATETIME,
 RDTIME  DATETIME,
 PRIMARY KEY(BORNUMBER),
 INDEX (DOCID, LIBID, COPYNO),
 FOREIGN KEY(READERID) REFERENCES L_USER(USERID), 
 FOREIGN KEY(DOCID, COPYNO,LIBID) REFERENCES COPY(DOCID, COPYNO,LIBID));

CREATE TABLE RESERVES
(RESNUMBER INT auto_increment  NOT NULL,
 READERID  VARCHAR(15),
 DOCID  VARCHAR(15),
 LIBID  VARCHAR(15),
 COPYNO  VARCHAR(15),
 DTIME  DATETIME,
 PRIMARY KEY(RESNUMBER),
 INDEX (DOCID, LIBID, COPYNO),
 FOREIGN KEY(READERID) REFERENCES L_USER(USERID), 
 FOREIGN KEY(DOCID, COPYNO,LIBID) REFERENCES COPY(DOCID, COPYNO,LIBID));